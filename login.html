<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login Form</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .hidden {
      display: none;
    }
    .error {
      color: red;
    }
    .valid {
      color: green;
    }
  </style>
</head>
<body>
  <div class="container mt-5">
    <h2 class="text-center mb-4">Login</h2>
    
    <!-- User type selector -->
    <div class="form-group mb-4">
      <label for="userType">Select User Type:</label>
      <select class="form-select" id="userType" onchange="toggleLoginForm()">
        <option value="normal">Normal User</option>
        <option value="admin">Admin</option>
      </select>
    </div>
    
    <!-- Admin Login Form -->
    <form id="adminLoginForm" class="hidden">
      <h4 class="mb-3">Admin Login</h4>
      <div class="form-group mb-3">
        <label for="adminEmail">Email ID</label>
        <input type="email" class="form-control" id="adminEmail" placeholder="Enter email" required>
      </div>
      <div class="form-group mb-3">
        <label for="adminID">Special Admin ID</label>
        <input type="text" class="form-control" id="adminID" placeholder="Enter Admin ID" required>
        <button type="button" class="btn btn-secondary mt-2" onclick="validateAdminID()">Validate Admin ID</button>
        <span id="adminIDStatus" class="error"></span>
      </div>
      <button type="button" class="btn btn-primary" id="getAdminOtp" onclick="sendOtp('admin')">Get OTP</button>
      
      <!-- OTP Input for Admin -->
      <div id="adminOtpSection" class="form-group mt-3 hidden">
        <label for="adminOtp">Enter OTP</label>
        <input type="text" class="form-control" id="adminOtp" placeholder="Enter OTP" required>
        <button type="button" class="btn btn-secondary mt-2" onclick="validateOtp('admin')">Validate OTP</button>
        <span id="adminOtpStatus" class="error"></span>
      </div>
    </form>

    <!-- Normal User Login Form -->
    <form id="userLoginForm">
      <h4 class="mb-3">Normal User Login</h4>
      <div class="form-group mb-3">
        <label for="userEmail">Email ID</label>
        <input type="email" class="form-control" id="userEmail" placeholder="Enter email" required>
      </div>
      <button type="button" class="btn btn-primary" id="getUserOtp" onclick="sendOtp('user')">Get OTP</button>
      
      <!-- OTP Input for User -->
      <div id="userOtpSection" class="form-group mt-3 hidden">
        <label for="userOtp">Enter OTP</label>
        <input type="text" class="form-control" id="userOtp" placeholder="Enter OTP" required>
        <button type="button" class="btn btn-secondary mt-2" onclick="validateOtp('user')">Validate OTP</button>
        <span id="userOtpStatus" class="error"></span>
      </div>
    </form>
  </div>

  <script>
    // OTP generation simulation
    let generatedOtp = '';

    // Simulating a database of valid admin IDs
    const validAdminIDs = ["ADMIN123", "ADMIN456", "ADMIN789"];

    function toggleLoginForm() {
      const userType = document.getElementById('userType').value;
      document.getElementById('adminLoginForm').classList.toggle('hidden', userType !== 'admin');
      document.getElementById('userLoginForm').classList.toggle('hidden', userType !== 'normal');
    }

    function validateAdminID() {
      const adminID = document.getElementById('adminID').value;
      const statusElement = document.getElementById('adminIDStatus');
      
      if (validAdminIDs.includes(adminID)) {
        statusElement.textContent = "Admin ID is valid!";
        statusElement.classList.remove('error');
        statusElement.classList.add('valid');
      } else {
        statusElement.textContent = "Invalid Admin ID!";
        statusElement.classList.remove('valid');
        statusElement.classList.add('error');
      }
    }

    function sendOtp(userType) {
      const emailField = userType === 'admin' ? document.getElementById('adminEmail') : document.getElementById('userEmail');
      const email = emailField.value;
      
      if (!email) {
        alert('Please enter an email address.');
        return;
      }

      // Simulate sending OTP
      generatedOtp = Math.floor(1000 + Math.random() * 9000);  // Generate 4-digit OTP
      alert(`OTP has been sent to ${email}: ${generatedOtp}`);  // In real scenario, email this OTP
      
      // Show OTP input field
      const otpSection = userType === 'admin' ? document.getElementById('adminOtpSection') : document.getElementById('userOtpSection');
      otpSection.classList.remove('hidden');
    }

    function validateOtp(userType) {
      const otpField = userType === 'admin' ? document.getElementById('adminOtp') : document.getElementById('userOtp');
      const otp = otpField.value;
      const statusElement = userType === 'admin' ? document.getElementById('adminOtpStatus') : document.getElementById('userOtpStatus');
      
      if (otp == generatedOtp) {
        statusElement.textContent = "OTP is valid!";
        statusElement.classList.remove('error');
        statusElement.classList.add('valid');
        alert(`${userType === 'admin' ? 'Admin' : 'User'} logged in successfully!`);
      } else {
        statusElement.textContent = "Invalid OTP!";
        statusElement.classList.remove('valid');
        statusElement.classList.add('error');
      }
    }
  </script>
</body>
</html>
